import _formatErrorMessage from "@base-ui-components/utils/formatErrorMessage";
import * as React from 'react';
/**
 * Returns a callback ref that registers/unregisters the trigger element in the store.
 *
 * @param id ID of the trigger. This must not be undefined by the time a ref is assigned.
 * @param store The Store instance where the trigger should be registered.
 */
export function useTriggerRegistration(id, store) {
  const registeredIdRef = React.useRef(null);
  return React.useCallback(triggerElement => {
    if (id == null) {
      throw new Error(process.env.NODE_ENV !== "production" ? 'Base UI: Trigger must have an `id` prop specified.' : _formatErrorMessage(77));
    }
    const triggers = new Map(store.state.triggers);
    if (triggerElement != null) {
      triggers.set(id, triggerElement);
      // Keeping track of the registered id in case it changes.
      registeredIdRef.current = id;
    } else if (registeredIdRef.current != null) {
      triggers.delete(registeredIdRef.current);
      registeredIdRef.current = null;
    }
    store.set('triggers', triggers);
  }, [store, id]);
}